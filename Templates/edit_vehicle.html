{% extends "base.html" %}
{% block title %}Editar Veículo{% endblock %}
{% block head %}
<script>
  function formatPlaca(input) {
    let value = input.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    if (value.length > 7) {
      value = value.substring(0, 7);
    }
    if (value.length > 3) {
      value = value.substring(0, 3) + '-' + value.substring(3);
    }
    input.value = value;
  }
</script>
{% endblock %}
{% block content %}
<h2>Editar Veículo</h2>
<form method="post">
  <div class="form-group">
    <label>Frota:</label>
    <input type="text" name="frota" class="form-control" value="{{ vehicle['frota'] }}" required>
  </div>
  <div class="form-group">
    <label>Placa:</label>
    <input type="text" name="placa" class="form-control" value="{{ vehicle['placa'] }}" oninput="formatPlaca(this)" required>
  </div>
  <div class="form-group">
    <label>Eixos:</label>
    <input type="number" name="eixos" class="form-control" value="{{ vehicle['eixos'] }}">
  </div>
  <div class="form-group">
    <label>Piso:</label>
    <select name="piso" class="form-control" required>
      <option value="FERRO" {% if vehicle['piso'] == 'FERRO' %}selected{% endif %}>FERRO</option>
      <option value="MADEIRA" {% if vehicle['piso'] == 'MADEIRA' %}selected{% endif %}>MADEIRA</option>
      <option value="MISTO" {% if vehicle['piso'] == 'MISTO' %}selected{% endif %}>MISTO</option>
    </select>
  </div>
  <div class="form-group">
    <label>Tipo de Carreta:</label>
    <input type="text" name="tipo_carreta" class="form-control" value="{{ vehicle['tipo_carreta'] }}">
  </div>
  <div class="form-group">
    <label>Comprimento:</label>
    <input type="text" name="comprimento" class="form-control" value="{{ vehicle['comprimento'] }}">
  </div>
  <div class="form-group">
    <label>Documento:</label>
    <select name="documento" class="form-control">
      <option value="Sim" {% if vehicle['documento'] == 'Sim' %}selected{% endif %}>Sim</option>
      <option value="Não" {% if vehicle['documento'] == 'Não' %}selected{% endif %}>Não</option>
    </select>
  </div>
  <button type="submit" class="btn btn-primary">Salvar</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
